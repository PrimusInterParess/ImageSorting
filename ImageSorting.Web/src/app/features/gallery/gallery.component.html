<h2>Gallery</h2>

<form (ngSubmit)="load()">
    <div>
        <label>Container</label>
        <input type="text" [(ngModel)]="container" name="container" required />
    </div>
    <div>
        <label>Prefix</label>
        <input type="text" [(ngModel)]="prefix" name="prefix" />
    </div>
    <button type="submit" [disabled]="loading || !container">Load</button>
</form>

<div *ngIf="loading">Loading...</div>

<div class="grid" *ngIf="items?.length">
    <div class="card" *ngFor="let it of items | slice:0:visibleCount">
        <div class="thumb">
            <video *ngIf="isVideo(it.name); else imgTpl" #vid [src]="contentUrl(it.name)" controls [muted]="true"
                preload="metadata" playsinline (mouseenter)="hoverEnter(it.name, vid)"
                (mouseleave)="hoverLeave(it.name, vid)"></video>
            <ng-template #imgTpl>
                <img [src]="contentUrl(it.name)" [alt]="it.name" loading="lazy" />
            </ng-template>
            <div class="overlay">
                <span class="filename">{{ it.name }}</span>
            </div>
        </div>
    </div>
</div>

<div class="load-more-wrap" *ngIf="(items?.length || 0) > visibleCount">
    <button class="load-more" (click)="visibleCount = visibleCount + pageSize" [disabled]="loading">Load more</button>
    <div class="count">Showing {{ visibleCount }} of {{ items.length }}</div>
</div>